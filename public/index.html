<!DOCTYPE html>
<html ng-app="ResearcherManagerApp">
    <head>
        <title>Researchers</title>
        <!-- Bootstrap core CSS -->
        <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
 
        <!-- Custom fonts for this template -->
        <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    
        <!-- Plugin CSS -->
        <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">
    
        <!-- Custom styles for this template -->
        <link href="css/freelancer.min.css" rel="stylesheet">
      
        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/bower_components/angular/angular.min.js"></script>
        <script type="text/javascript" src="/bower_components/angular-route/angular-route.min.js"></script>
        
        <script type="text/javascript" src="app.js"></script>
        <script type="text/javascript" src="/controller/list-ctrl.js"></script>
        <script type="text/javascript" src="/controller/search-ctrl.js"></script>
        
        <!-- Secure API -->
        <script type="text/javascript" src="/controller/list-secure-ctrl.js"></script>
        
        <script src="/bower_components/auth0-lock/build/lock.min.js"></script>
        <script>
          var clientId = 'ZH4XRlwhF7wHUR8NzjmJs7Px7d0TUJ58';
          var domain = 'si1718-dfr-researchers.eu.auth0.com';
          var lock = new Auth0Lock(clientId, domain, {
            auth: {
              redirectUrl: 'https://si1718-dfr-researchers-si1718davidfr.c9users.io/#!/',
              //responseType: 'code',
              params: {
                  responseType: 'id_token token',
                  access_type: 'offline',
                  scope: 'openid profile email exp' // Learn about scopes: https://auth0.com/docs/scopes
              },
              responseType: "id_token token",
              theme: {
                logo: 'https://personal.us.es/amjimigl/image/us.png',
                primaryColor: '#31324F'
              }
            }
          });
          
          /* Check erros */
          lock.on('authorization_error', function(error) {
            lock.show({
              flashMessage: {
                type: 'error',
                text: error.error_description
              }
            });
          });
          
          // Listen for the authenticated event and get profile
          lock.on("authenticated", function(authResult, token) {
            lock.getUserInfo(authResult.accessToken, function(error, profile) {
              if (error) {
                // Handle error
                return;
              }
              
              // Save token
              localStorage.setItem('accessToken', authResult.accessToken);
              localStorage.setItem('idToken', authResult.idToken);
            });
          });
          
          function logout(){
              lock.logout({
                returnTo: "https://si1718-dfr-researchers-si1718davidfr.c9users.io/#!/"
              });
              
              // Reset token
              localStorage.setItem("accessToken", null);
              localStorage.setItem('idToken', null);
              
              lock.logout();
          }
        </script>
    </head>
    
    <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#!/">Researchers</a>
        <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item mx-0 mx-lg-1">
              <button class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger btn btn-info" id="login" onclick="lock.show();">Login</button>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <button class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger btn btn-warning hide" id="logout" onclick="logout();">Logout</button>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#portfolio">Search engine</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead bg-primary text-white text-center">
      <div class="container">
        <img class="img-fluid mb-5 d-block mx-auto" src="img/logo-US.png" style="max-width: 50%;" alt="">
      </div>
    </header>

    <!-- Portfolio Grid Section -->
    <section class="portfolio" id="portfolio" ng-view>
    </section>

    <!-- About Section -->
    <section class="bg-primary text-white mb-0" id="about">
      <div class="container">
        <h2 class="text-center text-uppercase text-white">About</h2>
        <hr class="star-light mb-5">
        <div class="row text-center">
            <p class="lead">This is a microservice about researchers of University of Seville.</p>
            <p class="lead">If you need information about someone, just search on this app.</p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer text-center">
      <div class="container">
        <div class="row">
          <div class="col-md-4 mb-5 mb-lg-0">
          </div>
          <div class="col-md-4 mb-5 mb-lg-0">
            <h4 class="text-uppercase mb-4">More information</h4>
            <ul class="list-inline mb-0">
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://github.com/si1718/si1718-dfr-researchers">
                  <i class="fa fa-fw fa-github"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
          </div>
        </div>
      </div>
    </footer>

    <div class="copyright py-4 text-center text-white">
      <div class="container">
        <small>Copyright &copy; si1718-dfr-researchers</small>
      </div>
    </div>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-to-top d-lg-none position-fixed ">
      <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
        <i class="fa fa-chevron-up"></i>
      </a>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/freelancer.min.js"></script>

  </body>

</html>